
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%                      Commands added by Anran                          %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\bkt}[1]{\llbracket {#1} \rrbracket} % the [| ... |] bracket
\newcommand{\exec}[1]{\llbracket {#1} \rrbracket} % the bracket for execution
\newcommand{\nil}{\textbf{0}}
\newcommand{\N}{\mathds{N}}
\newcommand{\R}{\mathds{R}}
%\newcommand{\anran}[1]{\mycomment[Anran]{#1}} % command from package todonotes
%\renewcommand{\R}{\mathbb{R}} % symbol for real numbers
\newcommand{\Rinf}{\R^{\pm\infty}}
\newcommand{\join}{\curlywedge}
\newcommand{\meet}{\curlyvee}
\newcommand{\bigjoin}{\varcurlywedge}
\newcommand{\bigmeet}{\varcurlyvee}

\newcommand{\define}[1]{{\color{RoyalBlue}{#1}}} % color to highlight definitions
\newcommand{\imptt}[1]{{\color{Maroon}{#1}}} % color to highlight important things
\newcommand{\todoshow}[1]{\colorbox{lightpink!10}{\begin{minipage}{\textwidth}\color{LimeGreen}\textbf{\\TODO: }#1\end{minipage}}}
\newcommand{\todo}[1]{\footnote{TODO: #1}}
\newcommand{\eq}[1]{{\color{RoyalBlue}(\ref{eq:#1})}} % make brackets also blue, different from \eqref and \autoref
\newcommand{\mathl}[1]{{\color{Gray}{$#1$}}} % highlight for mathematical formulas 
\newcommand{\hoare}[3]{$#1\ \{#2\}\ #3$} % the layout for hoare triples
\newcommand{\hoarenm}[3]{#1\ \{#2\}\ #3} % the layout for hoare triples, no math surrounding
\newcommand{\note}[1]{\colorbox{red!10}{\begin{minipage}{\textwidth}\color{Blue}\textbf{\\Note for readers: }#1\end{minipage}}}
\newcommand{\example}[1]{\begin{center}\colorbox{ForestGreen!5}{#1}\end{center}} % block with green background for example
\newcommand{\seq}[0]{\stackrel{!}{=}} % should equal

\newcommand\tab[1][1cm]{\hspace*{#1}}

%%%%% Symbols used in notation %%%%%
\newcommand{\X}{\mathcal{X}} % symbol for variables
\newcommand{\V}{\mathcal{V}} % symbol for values
\renewcommand{\S}{{\Sigma}} % symbol for states
\renewcommand{\P}{\mathcal{P}} % symbol for predicates
\newcommand{\C}{\mathcal{C}} % symbol for programs






%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%                    Anran's theorem style                             %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newtheoremstyle{anranstyle} % name
    {\topsep}                    % Space above
    {\topsep}                    % Space below
    {\itshape}                   % Body font
    {}                           % Indent amount
    {\bfseries}                   % Theorem head font
    {}                          % Punctuation after theorem head
    {.5em}                       % Space after theorem head
    {\thmname{#1}\thmnumber{~\thechapter.#2}\color{black}\itshape\thmnote{\ (#3)}}  % Theorem head spec (can be left empty, meaning ‘normal’)

%%%%      Theorem-like environments       %%%%
\theoremstyle{anranstyle}
% \theoremstyle{definition}
% \newtheorem{env_name}{title}[numbered_within]
% \newtheorem{env_name}[numbered_like]{title}
\newtheorem{theo}{\color{Maroon}Theorem} %[chapter] % [chapter] makes theorem follow chapter counting
\newenvironment{theorem}[1]{\begin{theo} \label{thm:#1}\hypertarget{thm:#1}{}}{\end{theo}}
\newcommand{\thm}[1]{\hyperlink{thm:#1}{Theorem~\ref{thm:#1}}}

\newtheorem{lemm}[theo]{\color{Maroon}Lemma} % positioning [theorem] here makes lemma continue theorem counting, if it were to be at the end of line then it becomes "lemma 2.1.1"
\newenvironment{lemma}[1]{\begin{lemm} \label{lem:#1}\hypertarget{lem:#1}{}}{\end{lemm}}
\newcommand{\lem}[1]{\hyperlink{lem:#1}{Lemma~\ref{lem:#1}}}
% \newcommand{\lem}[1]{\label{lem:#1}\hypertarget{lem:#1}{ }} % use instead of \label
% \newcommand{\Lem}[1]{\hyperlink{lem:#1}{Lemma~\ref{lem:#1}}} % use instead of \autoref
\newtheorem{cor}[theo]{\color{Maroon}Corollary}
\newenvironment{corollary}[1]{\begin{cor} \label{cor:#1}\hypertarget{cor:#1}{}}{\end{cor}}
\newcommand{\coro}[1]{\hyperlink{cor:#1}{Corollary~\ref{cor:#1}}}

\newtheorem{state}[theo]{\color{Maroon}Statement}
\newenvironment{statement}[1]{\begin{state} \label{stm:#1}\hypertarget{stm:#1}{}}{\end{state}}
\newcommand{\stm}[1]{\hyperlink{stm:#1}{Statement~\ref{stm:#1}}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%        expanding ARROWS from James; changed by Rob  14-12-10.        %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\makeatletter
\def\comesfrom{\@transition\leftarrowfill}
\def\goesto{\@transition\rightarrowfill}
\def\ngoesto{\@transition\nrightarrowfill}
\def\Goesto{\@transition\Rightarrowfill}
\def\nGoesto{\@transition\nRightarrowfill}
\def\xmapsto{\@transition\mapstofill}
\def\nxmapsto{\@transition\nmapstofill}
\def\@transition#1{\@@transition{#1}}
\newbox\@transbox
\newbox\@arrowbox
\newbox\@downbox
\def\@@transition#1#2%
   {\setbox\@transbox\hbox
      {\vrule height 1.5ex depth .8ex width 0ex\hskip0.25em$\scriptstyle#2$\hskip0.25em}
   \ifdim\wd\@transbox<1.5em
      \setbox\@transbox\hbox to 1.5em{\hfil\box\@transbox\hfil}\fi
   \setbox\@arrowbox\hbox to \wd\@transbox{#1}
   \ht\@arrowbox\z@\dp\@arrowbox\z@
   \setbox\@transbox\hbox{$\mathop{\box\@arrowbox}\limits^{\box\@transbox}$}
   \dp\@transbox\z@\ht\@transbox 10pt
   \mathrel{\box\@transbox}}
\def\nrightarrowfill{$\m@th\mathord-\mkern-6mu%
  \cleaders\hbox{$\mkern-2mu\mathord-\mkern-2mu$}\hfill
  \mkern-6mu\mathord\not\mkern-2mu\mathord\rightarrow$}
\def\Rightarrowfill{$\m@th\mathord=\mkern-6mu%
  \cleaders\hbox{$\mkern-2mu\mathord=\mkern-2mu$}\hfill
  \mkern-6mu\mathord\Rightarrow$}
\def\nRightarrowfill{$\m@th\mathord=\mkern-6mu%
  \cleaders\hbox{$\mkern-2mu\mathord=\mkern-2mu$}\hfill
  \mkern-6mu\mathord\not\mathord\Rightarrow$}
\def\mapstofill{$\m@th\mathord\mapstochar\mathord-\mkern-6mu%
  \cleaders\hbox{$\mkern-2mu\mathord-\mkern-2mu$}\hfill
  \mkern-6mu\mathord\rightarrow$}
\def\nmapstofill{$\m@th\mathord\mapstochar\mathord-\mkern-6mu%
  \cleaders\hbox{$\mkern-2mu\mathord-\mkern-2mu$}\hfill
  \mkern-6mu\mathord\not\mkern-2mu\mathord\rightarrow$}
\makeatother %%%%% end of arrows definition
\newcommand{\ar}[1]{\mathrel{\goesto{#1}}}            % arrow
\newcommand{\nar}[1]{{\ngoesto{#1\;}}}                % negated arrow
\newcommand{\goto}[1]{\stackrel{#1}{\longrightarrow}} % transition
\newcommand{\gonotto}[1]{\mbox{$\,\,\,\not\!\!\!\stackrel{#1~}{\longrightarrow}$}} % negated tr.